function showErrorMsg(a){var b=$(a),c=document.getElementsByName(b.attr("name"))[0],d=$(c);if(("none"==d.css("display")||"hidden"==d.attr("type"))&&(d="none"!=d.next().css("display")?d.next():d.parent()),void 0==d.attr("createMsg")||"false"==d.attr("createMsg")){d.poshytip("hide");var e={content:"<div class='inputName' inputName='"+d.attr("name")+"'><span class='error'></span>身份证号码不合法，请校对</div>"};d.dialogtip(e),$(".tip-error").bgiframe(),d.attr("createMsgIdCard","true")}}function checkIdcard(a,b){if(null==a||""==$.trim(a))return!0;var a,c,d,e,f,g=(new Array("验证通过!","身份证号码位数不对!","身份证号码出生日期超出范围或含有非法字符!","身份证号码校验错误!","身份证地区非法!"),{11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"}),h=new Array;if(h=a.split(""),null==g[parseInt(a.substr(0,2))])return!1;switch(a.length){case 15:return(parseInt(a.substr(6,2))+1900)%4==0||(parseInt(a.substr(6,2))+1900)%100==0&&(parseInt(a.substr(6,2))+1900)%4==0?ereg=/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}$/:ereg=/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}$/,ereg.test(a)?!0:!1;case 18:return parseInt(a.substr(6,4))%4==0||parseInt(a.substr(6,4))%100==0&&parseInt(a.substr(6,4))%4==0?ereg=/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}([0-9]|X)$/:ereg=/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}([0-9]|X)$/,ereg.test(a)?(e=7*(parseInt(h[0])+parseInt(h[10]))+9*(parseInt(h[1])+parseInt(h[11]))+10*(parseInt(h[2])+parseInt(h[12]))+5*(parseInt(h[3])+parseInt(h[13]))+8*(parseInt(h[4])+parseInt(h[14]))+4*(parseInt(h[5])+parseInt(h[15]))+2*(parseInt(h[6])+parseInt(h[16]))+1*parseInt(h[7])+6*parseInt(h[8])+3*parseInt(h[9]),c=e%11,f="F",d="10X98765432",f=d.substr(c,1),f==h[17]?!0:(showErrorMsg(b),!0)):!1;default:return!1}return!0}function doActualHouseAction(a,b,c){$("#"+a).data("houseInfo",{id:b});var d=$("#"+a).data("button");if("next"==d){$("#"+a).createFrameDialog("next");var e=$("#"+a).data("data")[$("#"+a).data("index")].buttons.next;"function"==typeof e&&e(c)}else if("prev"==d){var f=$("#"+a).data("data")[$("#"+a).data("index")].buttons.prev;"function"==typeof f&&f(c)}else if("save"==d){$("#"+a).createFrameDialog("save");var g=$("#"+a).data("data")[$("#"+a).data("index")].buttons.save;"function"==typeof g&&g(c)}else if("saveContinue"==d){$("#"+a).data("population",{}),$("#"+a).data("location",{}),$("#"+a).createFrameDialog("saveContinue",{},"location");var h=$("#"+a).data("startData")[0].buttons.saveContinue;"function"==typeof h&&h(c)}}function doAction(a,b,c){$("#"+a).data("population",{id:b}),$("#"+a).data("location",{id:b});var d=$("#"+a).data("button");if("next"==d){$("#"+a).createActualPopulationDialog("next");var e=$("#"+a).data("data")[$("#"+a).data("index")].buttons.next;"function"==typeof e&&e(c)}else if("prev"==d){var f=$("#"+a).data("data")[$("#"+a).data("index")].buttons.prev;"function"==typeof f&&f(c)}else if("save"==d){$("#"+a).createActualPopulationDialog("save");var g=$("#"+a).data("data")[$("#"+a).data("index")].buttons.save;"function"==typeof g&&g(c)}else if("saveContinue"==d){$("#"+a).data("population",{}),$("#"+a).data("location",{}),$("#"+a).createActualPopulationDialog("saveContinue");var h=$("#"+a).data("startData")[0].buttons.saveContinue;"function"==typeof h&&h(c),void 0!=$("#deleteHeaderImage")&&null!=$("#deleteHeaderImage")&&$("#deleteHeaderImage").click()}}function doLocationAction(a,b,c,d){$("#"+a).data("population",{id:b}),$("#"+a).data("location",{id:b,locationName:d});var e=$("#"+a).data("button");if("next"==e){$("#"+a).createFrameDialog("next",{},"location");var f=$("#"+a).data("data")[$("#"+a).data("index")].buttons.next;"function"==typeof f&&f(c)}else if("prev"==e){var g=$("#"+a).data("data")[$("#"+a).data("index")].buttons.prev;"function"==typeof g&&g(c)}else if("save"==e){$("#"+a).createFrameDialog("save",{},"location");var h=$("#"+a).data("data")[$("#"+a).data("index")].buttons.save;"function"==typeof h&&h(c)}else if("saveContinue"==e){$("#"+a).data("population",{}),$("#"+a).data("location",{}),$("#"+a).createFrameDialog("saveContinue",{},"location");var i=$("#"+a).data("data")[$("#"+a).data("index")].buttons.saveContinue;"function"==typeof i&&i(c)}}function showErrorsForTab(a,b){for(var c=0;c<this.successList.length;c++){var d=this.successList[c];$(d).removeClass("errorInput").poshytip("disable"),$(d).attr("createMsg","false")}for(var c=0,c=0;c<this.errorList.length;c++){var d=this.errorList[c].element,e=this.errorList[c].message,f=$(d);if(("none"==f.css("display")||"hidden"==f.attr("type"))&&(f="none"!=f.next().css("display")?f.next():f.parent()),void 0==f.attr("createMsg")||"false"==f.attr("createMsg")){var g={alignX:"center",alignY:"bottom",showOn:"focus",content:e};"SELECT"===f[0].tagName&&(g.alignX="right",g.alignY="center"),f.dialogtip(g),$(".tip-error").bgiframe(),$(".tip-error").css("cursor","pointer"),$(".tip-error").click(function(){var a=$(document.getElementsByName($(this).find(".inputName").attr("inputName"))[0]);"none"==a.css("display")&&(a=a.next()),a.attr("createMsg","false"),$(this).remove()}),f.attr("createMsg","true")}var h;if(0==c){h=f.parents(".container:first").attr("id");var i=$("a[href='#"+h+"']");i.click()}f.parents(".container:first").attr("id")==h&&("none"==f.css("display")&&(f=f.next()),f.addClass("errorInput")),c++}}function moveNode(a,b,c){var d="up"==c?"顶层":"底层";return a.level!=b.level&&a.count<=0?void $.notice({level:"warn",message:d+"目录不能移动。"}):void("up"==c?$("#"+a.id).after($("#"+b.id)):$("#"+b.id).after($("#"+a.id)))}function hideFrozencolModel(a){for(var b=0;b<a.length;b++)1==a[b].frozen&&$("#col_"+a[b].name).parent().hide()}function findHiddenColums(a,b){if(a)for(var c=0;c<a.length;c++){var d=a[c].substring(4,a[c].length);if(d==b)return!0}return!1}function extendDefaultOption(a,b,c){a.height=$(".ui-layout-center").height()-$("#nav:visible").outerHeight()-$("#thisCrumbs:visible").outerHeight()-$(".content-top").height()-$("#content-top").height()-$(".groupNav").height()-$("#commonPopulation:visible").height()-$("#tabList .ui-tabs-nav").outerHeight()-$("#contractCommonPopulation").outerHeight(!0)-$("#statistics").outerHeight(!0)-65,0==a.pager&&(a.rowNum=-1),$.extend(a,b);for(var d=0;d<a.colModel.length;d++)c&&findHiddenColums(c,a.colModel[d].name)?a.colModel[d].hidden=!1:c&&(a.colModel[d].hidden=!0),"id"==a.colModel[d].name&&a.showColModelButton&&(a.colModel[d].hidden=!0,a.colModel[d].hidedlg=!0)}function extendOnSelectRow(a,b){a.onSelectRow=function(a){b.onSelectRow&&b.onSelectRow.call(null,a)}}function getColModelFromCookie(self){var colModelFromCookie;if($.cookie("gridColums")){var jsonData=eval("("+$.cookie("gridColums")+")");colModelFromCookie=jsonData[self.attr("id")]}return colModelFromCookie}function proccessStyleWhenSetColumShow(a){$("#ColTbl_"+a).css({height:"200px",overflow:"auto"}).parents(".ui-widget:first").css({"z-index":"2500"}),$(".ui-jqdialog").css({bottom:"25px",left:"0px"}),$(".jqResize").remove()}function bindClickToOkButton(dialog,selfId){$("#dData").click(function(){var dialogValue="";dialog.find(".cbox").each(function(){$(this).attr("checked")&&(dialogValue=dialogValue+"'"+$(this).attr("id")+"',")}),dialogValue=dialogValue.substring(0,dialogValue.length-1);var cookieData=selfId+":["+dialogValue+"]",cookieValue=$.cookie("gridColums"),jsonData={};cookieValue&&""!=cookieValue&&(jsonData=eval("("+cookieValue+")")),jsonData[selfId]=eval("(["+dialogValue+"])"),$.cookie("gridColums",Convert.ToJSONString(jsonData),{expires:8e4,path:"/"})})}function bindClickToCancelButton(a){var b=new Array;a.find(".cbox").each(function(a,c){1==$(this).attr("checked")||"checked"==$(this).attr("checked")?b[a]=!0:b[a]=!1}),$("#eData").click(function(){a.find(".cbox").each(function(a,c){$(this).attr("checked",b[a])})})}function proccessLabelShow(a){var b=$("label",a);b.each(function(a,b){var c=$(b).text(),d=c.lastIndexOf("(");-1!=d&&$(b).text(c.substring(0,c.lastIndexOf("(")))})}function threeSelect(a){var b=$("#"+a.province),c=$("#"+a.city),d=$("#"+a.district);a.provinceValue?a.provinceValue:null,a.cityValue?a.cityValue:null,a.districtValue?a.districtValue:null;getProvince(a),b.change(function(){if(clearOptions(c),-1==this.selectedIndex||""==this.options[this.selectedIndex].value)return void c.change();this.options[this.selectedIndex].value;$.ajax({type:"post",url:"/baseinfo/permanentAddressManage/getPermanentAddressByParentName.action",dataType:"json",async:!1,data:{parentName:b.val()},success:function(a){var b=a.split(",");for(i=0;i<b.length-1;i++)c.append("<option value='"+b[i]+"'>"+b[i]+"</option>")}}),c.change()}),c.change(function(){clearOptions(d);b[0].options[b[0].selectedIndex].value;if(-1!=this.selectedIndex&&""!=this.options[this.selectedIndex].value){this.options[this.selectedIndex].value;$.ajax({type:"post",url:"/baseinfo/permanentAddressManage/getPermanentAddressByParentNameAndPId.action",dataType:"json",async:!1,data:{parentName:b.val()+","+c.val()},success:function(a){var b=a.split(",");for(i=0;i<b.length-1;i++)d.append("<option value='"+b[i]+"'>"+b[i]+"</option>")}})}})}function appendOptionTo(a,b,c,d){var e=$("<option>").text(b).val(b);b==d&&e.attr("selected","selected"),e.appendTo(a)}function clearOptions(a){a.html(""),appendOptionTo(a,"","","","")}function getProvince(a){$.ajax({type:"post",url:"/baseinfo/permanentAddressManage/getPermanentAddress.action",dataType:"json",async:!1,success:function(b){clearOptions($("#"+a.province)),clearOptions($("#"+a.city)),clearOptions($("#"+a.district));var c=b.split(",");for(i=0;i<c.length-1;i++)$("#"+a.province).append("<option value='"+c[i]+"'>"+c[i]+"</option>");$("#"+a.province+" option").size()>1&&($("#"+a.province).val(a.provinceValue?a.provinceValue:null),getCity(a))}})}function getCity(a){""!=a&&""!=a.provinceValue&&$.ajax({type:"post",url:"/baseinfo/permanentAddressManage/getPermanentAddressByParentName.action",dataType:"json",data:{parentName:a.provinceValue},async:!1,success:function(b){clearOptions($("#"+a.city));var c=b.split(",");for(i=0;i<c.length-1;i++)$("#"+a.city).append("<option value='"+c[i]+"'>"+c[i]+"</option>");$("#"+a.city+" option").size()>1&&($("#"+a.city).val(a.cityValue?a.cityValue:null),getDistrict(a))}})}function getDistrict(a){$.ajax({type:"post",url:"/baseinfo/permanentAddressManage/getPermanentAddressByParentNameAndPId.action",dataType:"json",async:!1,data:{parentName:a.provinceValue+","+a.cityValue},success:function(b){clearOptions($("#"+a.district));var c=b.split(",");for(i=0;i<c.length-1;i++)$("#"+a.district).append("<option value='"+c[i]+"'>"+c[i]+"</option>");$("#"+a.district).val(a.districtValue?a.districtValue:null)}})}function ajax(a,b,c){$.ajax({type:"post",url:"/baseinfo/permanentAddressManage/getPermanentAddressByParentName.action",dataType:"json",async:!1,data:{parentName:a},success:function(a){clearOptions(b);var d=a.split(",");for(i=0;i<d.length-1;i++)b.append("<option value='"+d[i]+"'>"+d[i]+"</option>");b.val(c?c:null)}})}function proccessTreeOption(a,b){var c={shouldJugeMultizones:!1,rootId:!1,allOrg:!1,excludeRoot:!1,orgType:!1,url:"/sysadmin/orgManage/firstLoadExtTreeData.action",nodeUrl:"",isLocalData:!1,isRootSelected:!0,directlySupervisor:!1,loadCom:function(){}};$.extend(c,a);var d=PATH+c.url;c.orgType&&(d=-1==d.indexOf("?")?d+"?orgType="+c.orgType:d+"&orgType="+c.orgType),0!=c.rootId&&(d=-1==d.indexOf("?")?d+"?rootId="+c.rootId:d+"&rootId="+c.rootId),c.excludeRoot&&(d=-1==d.indexOf("?")?d+"?excludeRoot="+c.excludeRoot:d+"&excludeRoot="+c.excludeRoot),c.allOrg&&(d=-1==d.indexOf("?")?d+"?allOrg="+c.allOrg:d+"&allOrg="+c.allOrg),c.directlySupervisor&&(d=-1==d.indexOf("?")?d+"?directlySupervisor="+c.directlySupervisor:d+"&directlySupervisor="+c.directlySupervisor),c.shouldJugeMultizones&&(d+=-1==d.indexOf("?")?"?shouldJugeMultizones=true":"&shouldJugeMultizones=true");var e=b.attr("id"),f=Ext.tree,g={animate:!1,enableDD:!1,containerScroll:!0,dropConfig:{appendOnly:!0},rootVisible:!1};c.isLocalData||(g.loader=new f.TreeLoader({dataUrl:d}));var h=new f.TreePanel(e,g);h.on("beforeload",function(a){if(a.id!=e+"-root"){""==c.nodeUrl&&(c.nodeUrl="/sysadmin/orgManage/ajaxOrgsForExtTree.action");var b=(-1==c.nodeUrl.indexOf("?")?"?":"&")+"parentId="+a.id;c.orgType&&(b=b+"&orgType="+c.orgType),h.loader.dataUrl=PATH+c.nodeUrl+b}});var i=new f.AsyncTreeNode({text:"orgManage",draggable:!1,id:e+"-root"});return h.setRootNode(i),h.render(),c.isLocalData||i.expand(!1,!1,function(a){null!=i.firstChild&&void 0!=i.firstChild&&i.firstChild.expand(!1,!1,function(){c.isRootSelected&&(h.getSelectionModel().select(i.firstChild),h.fireEvent("click",i.firstChild))})}),i.expand(!1,!1,function(){h.exFunc(),c.loadCom()}),h.exFunc=function(){},h}!function(a){a.fn.extend({userAutocomplete:function(b){function c(b){return a.extend({"user.name":b},d)}var d={searchChildOrg:!1,rows:10};a.extend(d,b.postData);var e=2;b&&b.fillIndex&&(e=b.fillIndex);var f={delay:500,minLength:0,source:function(b,d){""==b.term&&(b.term=null),a.ajax({url:PATH+"/sysadmin/userManage/findUserForAutocomplete.action",data:c(b.term),success:function(b){d(a.map(b,function(a){return{id:a[0],orgId:a[4],userName:a[1],label:a[1]+" ,"+a[2]+" ,"+a[3],value:a[e]}}))},error:function(){a.messageBox({message:"搜索失败，请重新登入！",level:"error"})}})}};a.extend(f,b),a(this).autocomplete(f)}})}(jQuery),function($){$.createDialog=function(a){function b(a,b){b.empty(),b.html('<div style="margin-top:40px;margin-left:'+(c.width-100)/2+'px"><img src="'+RESOURCE_PATH+'/resource/images/loading.gif" alt="加载中..." /></div>'),b.bgiframe(),b.dialog(c),b.width(b.width()).css({overflowX:"hidden"}),$.ajax({url:a,cache:!1,success:function(a){proccessLoginResult(a,function(){b.html(a)})}})}var c={id:"",title:"",width:300,height:400,modal:!0,stack:!0,resizable:!1,bgiframe:!0,position:"center",dragStart:function(){$(".tip-error").remove(),$(".tip-yellowsimple").remove(),$("*[createMsg='true']").attr("createMsg","false")},close:function(){d.empty(),d.dialog("destroy"),d.remove()},url:!1};$.extend(c,a);var d=$("<div id='"+c.id+"'/>");d.appendTo("body"),a.close&&(c.close=function(){a.close.call(c.close,d),d.empty(),d.dialog("destroy"),d.remove(),$(".tip-error").remove(),$(".tip-yellowsimple").remove(),$("*[createMsg='true']").attr("createMsg","false")}),b(c.url,d)},$.confirm=function(o){var dfop={level:"info",message:"",title:"确认",okFunc:!1,cancelFunc:!1,cancelBtnName:"取消",okbtnName:"确定"};$.extend(dfop,o);var div='<div title="'+dfop.title+'" ><p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>'+dfop.message+"</p></div>",buttonStr="{'"+dfop.okbtnName+"':function(){if(o.okFunc){o.okFunc.call(dfop.okFunc,$(this));}$(this).dialog('destroy');$(this).remove();},'"+dfop.cancelBtnName+"':function(){if(o.cancelFunc){o.cancelFunc.call(dfop.cancelFunc,$(this));}$(this).dialog('destroy');$(this).remove();}}",buttons=eval("("+buttonStr+")");dfop={autoOpen:!0,resizable:!1,modal:!0,buttons:buttons},$.extend(dfop,o),$(div).dialog(dfop)},$.notice=function(o){var dfop={level:"info",okbtnName:"确定",title:"警告",message:"",okFunc:!1};$.extend(dfop,o);var div='<div title="'+dfop.title+'"><p><span class="ui-icon ui-icon-alert" style="float:left; margin-right: .3em;"></span>'+dfop.message+"</p></div>",buttonStr="{'"+dfop.okbtnName+"':function(){if(o.okFunc){o.okFunc.call(dfop.okFunc,$(this));}$(this).dialog('destroy');$(this).remove();}}",buttons=eval("("+buttonStr+")");dfop={autoOpen:!0,resizable:!1,modal:!0,buttons:buttons},$.extend(dfop,o),$(div).dialog(dfop)},$.yesNoCancelDlg=function(o){var dfop={level:"info",yesFunc:!1,noFunc:!1,cancelFunc:!1,message:"",title:"",yesBtnName:"是",noBtnName:"否",cancelBtnName:"取消"};$.extend(dfop,o);var div='<div title="'+dfop.title+'"><p><span class="ui-icon ui-icon-alert" style="float:left;margin-right: .3em;"></span>'+dfop.message+"</p></div>",buttonStr="{'"+dfop.yesBtnName+"':function(){if(o.yesFunc){o.yesFunc.call(dfop.yesFunc,$(this));}$(this).dialog('destroy');$(this).remove();},'"+dfop.noBtnName+"':function(){if(o.noFunc){o.noFunc.call(dfop.noFunc,$(this));}$(this).dialog('destroy');$(this).remove();},'"+dfop.cancelBtnName+"':function(){if(o.cancelFunc){o.cancelFunc.call(dfop.cancelFunc,$(this));}$(this).dialog('destroy');$(this).remove();}}",buttons=eval("("+buttonStr+")");dfop={autoOpen:!0,resizable:!1,modal:!0,buttons:buttons},$.extend(dfop,o),$(div).dialog(dfop)},$.fn.createDialog=function(a){function b(a,b){b.empty(),b.html('<div style="margin-top:40px;margin-left:'+(e.width-100)/2+'px"><img src="'+RESOURCE_PATH+'/resource/images/loading.gif" alt="加载中..." /></div>'),b.dialog(e),b.width(b.width()),$.ajax({url:a,type:e.ajaxType,cache:!1,data:e.postData,success:function(a){proccessLoginResult(a,function(){b.html(a)}),b.children("#dialog-form:first").removeAttr("title"),e.loadComplete(),d.unbind("scroll").scroll(function(){$(".tip-error").remove(),$(".ui-autocomplete").hide()})}})}var c=this.selector.substring(1,this.selector.length);void 0==this[0]&&$("body").append('<div id="'+c+'"></div>');var d=$("#"+c),e={title:"",width:300,height:400,modal:!0,resizable:!1,close:function(){},ajaxType:"get",postData:{},stack:!0,url:!1,position:"center",shouldEmptyHtml:!0,dragStart:function(){$(".tip-error").remove(),$(".tip-yellowsimple").remove(),$("*[createMsg='true']").attr("createMsg","false"),d.css("opacity","0.1"),d.parent().removeClass("fadeIn")},dragStop:function(){d.css("opacity","1")},loadComplete:function(){},open:function(){d.parent().addClass("fadeIn")}};return $.extend(e,a),e.close=function(){a.close&&a.close.call(e.close,$(this)),e.shouldEmptyHtml&&$(this).empty(),$(".tip-error").remove(),$(".tip-yellowsimple").remove(),$("*[createMsg='true']").attr("createMsg","false"),d.parent().removeClass("fadeIn"),d.dialog("destroy"),$(".peopleSelectDlg").remove()},$.cookie("bigFontStyle")>=16&&(e.width=e.width+80),b(e.url,d),d}}(jQuery),function($){$.fn.createFrameDialog=function(o,item,type){function selectLeftMenu(a){$(".dlgLeftMenu").children("li").eq(a).addClass("cur").siblings().removeClass("cur"),$(".dlgUrlBoxLoading").show()}function leftMenuClick(a,b){var c=function(){var c=$(a).index();self.data("index",c),operateAfterButtonClick(c,b),selectLeftMenu(c)};c()}function initDialog(a){self.data(type,{}),self.data("houseInfo",{});var b={data:[],width:840,height:600,model:"add",title:"",buttons:{},url:PATH+"/common/maintain.jsp?type="+type,loadComplete:function(){var a=$(".dlgLeftMenu"),c=$(".dlgBtnList");btnFun(c,b.data,0),menuInit(b.data,a),a.children().first().addClass("cur first"),b.data.length>0&&void 0!=b.data[0].url&&urlLoad(b.data[0].url),"update"==b.model&&a.delegate("li","click",function(){var a=$(this).index();operateAfterButtonClick(a)})}};$.extend(b,a),self.data("data",b.data),void 0==a.model?self.data("model",b.model):self.data("model",a.model),self.data("index",0),self.createDialog(b)}function showMenu(a){}function hideMenu(a){}function doOperate(a,b,c){var d=$(".dlgLeftMenu li.cur").index(),e=$(".dlgLeftMenu li").size();switch(a){case"next":e>d+1&&(operateAfterButtonClick(d+1),$(".dlgLeftMenu li").eq(d).addClass("complete"));break;case"prev":d-1>=0&&operateAfterButtonClick(d-1);break;case"save":self.dialog("close");break;case"saveContinue":self.data("data",self.data("startData")),operateAfterButtonClick(0),"population"==c?$("#headerImg",self).attr("src",PATH+"/resource/images/head.png"):"location"==c&&$("#headerImg",self).attr("src",PATH+"/resource/images/locationHead.png"),$("#fileToUpload",self).val(""),$(".dlgLeftMenu li").removeClass("complete"),$(".dlgLeftMenu li a[id=1]").parent().remove();break;case"show":break;case"hide":break;case"add":if("object"==typeof b){for(var f=self.data("data"),g=$(".dlgLeftMenu"),h=$(".dlgBtnList"),i=0;i<b.length;i++){if(void 0!=$(".dlgLeftMenu li:contains("+b[i].title+")")[0])return;var j=g.find("li").size(),k=void 0==b[i].index?j:b[i].index,l=$("<a id="+k+' href="javascript:;"></a>').text(b[i].title),m=$("<li></li>").append(l);g.find("li").eq(k-1).after(m),f.splice(k,0,b[i])}self.data("data",f)}break;case"remove":if("string"==typeof b){if(void 0==$(".dlgLeftMenu li:contains("+b+")")[0])return;var d=$(".dlgLeftMenu li:contains("+b+")").index(),f=self.data("data");$(".dlgLeftMenu li:contains("+b+")").remove(),f.splice(d,1),self.data("data",f)}break;case"updata":if(void 0!=b)for(var h=$(".dlgBtnList"),i=0;i<b.length;i++){var n=$(".dlgLeftMenu li:contains("+b[i].title+")"),o=n.data("data");o.buttons=b[i].buttons,n.data("data",o),d==n.index()&&(h.empty(),btnFun(h,self.data("data"),d))}}}type||(type="location");var self=$(this),submitFun=function(a){$(".dlgUrlBox form:first").submit()},urlLoad=function(url,index){var context=self.data(type),postData={};null!=self.data("model")&&"add"==self.data("model")&&null!=context.id&&isNaN(context.id)?postData={"cacheId.id":context.id}:null!=self.data("model")&&"add"==self.data("model")&&url.indexOf(type+".id")<0?postData=eval("({'"+type+".id':context.id,'"+type+".name':context.locationName})"):null!=context.id&&isNaN(context.id)&&(postData={"cacheId.id":context.id}),self.data("houseInfo")&&self.data("houseInfo").id&&(postData=$.extend(postData,{"cacheId.houseInfoId":self.data("houseInfo").id})),postData=$.extend(postData,{contextId:$("#contextId").val()}),$.ajax({url:url,async:!1,cache:!1,data:postData,success:function(a){$(".dlgUrlBox").html(""),$(".dlgUrlBox").html(a),selectLeftMenu(index),$(".dlgUrlBoxLoading").hide(),self.data("index",index),$(".dlgUrlBox input,.dlgUrlBox select,.dlgUrlBox textarea").one("focusin",function(){$(this).attr("defaultValue",$(this).attr("value"))}),$(".dlgUrlBox input,.dlgUrlBox select,.dlgUrlBox textarea").focusout(function(){$(this).attr("defaultValue")!=$(this).attr("value")&&$(".dlgUrlBox form").data("update",!0)})}})},btnFun=function(a,b,c){if(null!=b&&""!=b){if(void 0!=b[c].buttons.prev){var d=$('<input type="button" />').attr("value","上一步").addClass("prevBtn");d.bind("click",function(){self.data("button","prev"),"population"==type?self.createActualPopulationDialog("prev"):self.createFrameDialog("prev")}),a.append(d)}if(void 0!=b[c].buttons.next&&(0==$(".dlgLeftMenu li").size()||$(".dlgLeftMenu li").size()-1>c)){var e=$('<input id="_nextBtn" type="button" />').attr("value","下一步");e.bind("click",function(){self.data("button","next"),submitFun();var a=$(self).data("data")[$(self).data("index")].buttons.next;"function"==typeof a&&a()}),a.append(e)}if(void 0!=b[c].buttons.save){var f=$('<input id="_saveBtn" type="button" />').attr("value","保存并关闭").addClass("saveBtn");f.bind("click",function(){self.data("button","save"),submitFun();var a=$(self).data("data")[$(self).data("index")].buttons.save;"function"==typeof a&&a()}),a.append(f)}if(void 0!=b[c].buttons.saveContinue){var g=$('<input id="_saveContinueBtn" type="button" />').attr("value","保存并继续").addClass("saveContinueBtn");g.bind("click",function(){self.data("button","saveContinue"),$("#contextId").val(Math.uuid()),submitFun();var a=$(self).data("data")[$(self).data("index")].buttons.saveContinue;"function"==typeof a&&a()}),a.append(g)}}},menuInit=function(a,b){var c=a;for(var d in c)if(!c[d].hidden){var e=$('<a href="javascript:;"></a>').text(c[d].title);if(void 0!=c[d].title&&null!=c[d].title&&""!=c[d].title){var f=$("<li></li>").append(e);b.append(f),f.data("data",c[d])}}},operateAfterButtonClick=function(a){var b=$(".dlgBtnList");$(".dlgUrlBoxLoading").show(),a>0?($(".PictureUpload").hide(),$(".shadow").hide()):$(".PictureUpload").show();var c=self.data("data");urlLoad(c[a].url,a),b.empty(),btnFun(b,c,a)};if("string"!=typeof o){if(initDialog(o),void 0!=o.data){for(var startData=new Array,i=0;i<o.data.length;i++)startData.push(o.data[i]);self.data("startData",startData)}}else doOperate(o,item,type)},$.fn.createActualPopulationDialog=function(a,b){$(this).createFrameDialog(a,b,"population")}}(jQuery),function(a){a.fn.createTabDialog=function(b){function c(){var b=a("#tabDialogComponent",l).find("form");if(0==b.length)return!0;var c=b.valid();return c&&a("#tabDialogComponent",l).find("form").submit(),c}function d(a){"view"==n.mode?l.dialog("option","buttons",{"关闭":h}):0==a?k.find(".ui-tabs-nav li").length>1&&(null==b.saveButton||"undefined"==b.saveButton)?l.dialog("option","buttons",{"下一步":f,"保存":g}):k.find(".ui-tabs-nav li").length>1&&"exist"==b.saveButton?l.dialog("option","buttons",{"下一步":f}):l.dialog("option","buttons",{"保存":g,"关闭":h}):a==k.find(".ui-tabs-nav li").length-1?l.dialog("option","buttons",{"上一步":i,"保存":g}):l.dialog("option","buttons",{"上一步":i,"下一步":f,"保存":g})}function e(b){k=a("#tabDialogComponent",l);a("#tabDialogComponent",l).find("ul");k.tabs({activate:function(a,b){var c=k.tabs("option","active");d(c),k.data("startLoad","true")},tabTemplate:'<li><a href="#{href}" label="#{label}">#{label}</a></li>',ajaxOptions:{data:{id:function(){return a("#tabDialogId").val()},organizationId:function(){return a.getCurrentOrgId()},type:function(){return a("#tabDialogType").val()},operateSource:function(){return a("#operateSource").val()}}},select:function(b,c){a("#tabDialogComponent .ui-tabs-panel").empty(),c.index>0?(a(".PictureUpload").hide(),a(".shadow").hide()):a(".PictureUpload").show(),a(".tip-error").remove()},add:function(a,b){var c=k.tabs("option","active");d(c)},remove:function(a,b){var c=k.tabs("option","active");d(c)},load:function(b,c){a.messageBox("close"),k.data("startLoad","false")}});for(var c=0;c<b.length;c++){var e=b[c];k.tabs("add",e.url,e.title)}a("#tabDialogId",l).val()&&""!=a("#tabDialogId",l).val()||k.tabs("disable"),a("#tabDialogComponent .ui-tabs-nav").delegate("a","click",function(a){a.preventDefault()})}function f(){if(c()&&"true"!=k.data("startLoad")){var a=(new Date).getTime();j("下一步",a-m),m=a;var b=k.tabs("option","active");b<k.find("li").length-1&&(k.tabs("enable"),k.tabs("option","active",b+1)),b<k.find("li").length-2?l.dialog("option","buttons",{"上一步":i,"下一步":f,"保存":g}):b==k.find(".ui-tabs-nav li").length-2&&l.dialog("option","buttons",{"上一步":i,"保存":g})}}function g(){if("true"!=k.data("startLoad")&&("undefined"!=a("#previousOrNextOrSave")&&a("#previousOrNextOrSave").val("save"),c())){var b=(new Date).getTime();j("保存",b-m),isClickSave=!0,m=b,n.saveClose&&(a.messageBox({level:"success",message:"保存成功！"}),l.dialog("close"))}}function h(){l.dialog("close")}function i(){if("true"!=k.data("startLoad")&&c()){var a=(new Date).getTime();j("上一步",a-m),m=a;var d=k.tabs("option","active");0!=d&&(k.tabs("enable"),k.tabs("option","active",d-1)),d>1?l.dialog("option","buttons",{"上一步":i,"下一步":f,"保存":g}):1!=d||null!=b.saveButton&&"undefined"!=b.saveButton?1==d&&"exist"==b.saveButton&&l.dialog("option","buttons",{"下一步":f}):l.dialog("option","buttons",{"下一步":f,"保存":g})}}function j(c,d){if(null!=b&&"function"==typeof UBA_dealNull&&"string"==typeof UBA_WEB_ACCESS_OPERATING_PATH&&"function"==typeof UBA_ARRAY_HAS_URL&&UBA_ARRAY_HAS_URL(window.location.hash+b.title)){var e=k.find("li:eq("+k.tabs("option","active")+") a"),f=UBA_dealNull(a("#thisCrumbs:visible").text()).replace(new RegExp("(undefined|当前位置|当前层级| |:|：|	|\n|\r|(\r\n)|()|(\u2028)|(\u2029))","g"),"");a.ajax({type:"POST",url:UBA_WEB_ACCESS_OPERATING_PATH+"uba_operatingTime.png?orgName="+encodeURI(UBA_dealNull(a("#CURRENT_SYSTEM_NAME").attr("orgName")))+"&userName="+encodeURI(UBA_dealNull(a("#CURRENT_SYSTEM_NAME").attr("user")))+"&doName="+encodeURI(UBA_dealNull(c))+"&sysName="+encodeURI(UBA_dealNull(a("#CURRENT_SYSTEM_NAME").val()))+"&modelName="+encodeURI(">>"==f||">>>"==f||0==a("#contentDiv").text().length?1==a("div.workbenchMain").length?"首页":"":f)+"&nowStep="+encodeURI(UBA_dealNull(e.text()))+"&title="+encodeURI(UBA_dealNull(b.title))+"&trajectoryInfo="+encodeURI("["+UBA_dealNull(l.attr("uba_trajectoryInfo")).substr(1).replace(new RegExp("&","g"),"%26").replace(new RegExp("\\?","g"),"%3F").replace(new RegExp("=","g"),"%3D")+"]")+"&time="+d+"&tabId="+l.attr("uba_tabId")+"_"+l.attr("uba_tabId_index")+"&url="+UBA_dealNull(e.attr("href")).replace(new RegExp("&","g"),"%26").replace(new RegExp("\\?","g"),"%3F").replace(new RegExp("=","g"),"%3D"),dataType:"jsonp"}),l.attr("uba_tabId_index",parseInt(l.attr("uba_tabId_index"))+1),l.attr("uba_trajectoryInfo","")}}var k,l=a(this),m=(new Date).getTime(),n={tabs:[],data:{},width:840,height:600,mode:"",model:"",title:"",saveClose:!0,url:PATH+"/common/tabDialog/tabDialog.jsp",loadComplete:function(){e(n.tabs)}};a.extend(n,b),l.data("data",n.data),l.createDialog(n),"view"==n.mode?l.dialog("option","buttons",{"关闭":h}):n.tabs.length>1?l.dialog("option","buttons",{"下一步":f,"保存":g}):l.dialog("option","buttons",{"保存":g,"关闭":h})},a.fn.proccessSuccess=function(b,c){a("#tabDialogId",a(this)).val(b)},a.fn.proccessTypeSuccess=function(b,c){a("#tabDialogType",a(this)).val(b)},a.fn.getTabIndexByTitle=function(b){return a("#tabDialogComponent .ui-tabs-nav li a",a(this)).index(a("a[label='"+b+"']"))},a.fn.addTabToDialog=function(b){var c=a(this).getTabIndexByTitle(b.title);c>=0&&a(this).removeTabFromDialog(c);var d=a("#tabDialogComponent",a(this));d.tabs("add",b.url,b.title,b.index),d.tabs("option","disabled")&&d.tabs("disable")},a.fn.tabDialog=function(b){a("#tabDialogComponent",a(this)).tabs(b)},a.fn.removeTabFromDialog=function(b){b>=0&&a("#tabDialogComponent",a(this)).tabs("remove",b)},a.fn.removeTabFromDialogByTitle=function(b){a(this).removeTabFromDialog(a(this).getTabIndexByTitle(b))}}(jQuery),jQuery.validator.addMethod("isLawful",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/((&lt;)\s*(&nbsp;)*(SCRIPT)\s*(&nbsp;)*(&gt;).*(&lt;)\s*(&nbsp;)*\/\s*(&nbsp;)*(SCRIPT)(&gt;))|(b|java)script|((expression)\s*(&nbsp;)*\(.*\))|(&lt;)\s*(&nbsp;)*(SCRIPT)\s*(&nbsp;)*(&gt;)|(&lt;)\s*(&nbsp;)*\/\s*(&nbsp;)*(SCRIPT)(&gt;)/gi;return null!=a.replace(/[ ]/g,"").match(c)?!1:!0}),jQuery.validator.addMethod("titleStr",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^(?:[\u4e00-\u9fa5]*\w*-*_*\s*）*\"*\'*<*>*《*》*（*\(*\)*)+$/;return c.exec(a.replace(/[ ]/g,""))?!0:!1}),jQuery.validator.addMethod("addressStr",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^(?:[\u4e00-\u9fa5]*\w*-*\s*）*#*（*\(*\)*)+$/;return c.exec(a.replace(/[ ]/g,""))?!0:!1}),jQuery.validator.addMethod("multiNames",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^(?:[\u4e00-\u9fa5]*\w*,*\s*，*、*)+$/;return c.exec(a.replace(/[ ]/g,""))?!0:!1}),jQuery.validator.addMethod("isCharacter",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^[A-Za-z]+$/;return c.exec(a.replace(/[ ]/g,""))?!0:!1}),jQuery.validator.addMethod("maxCharLength",function(a,b,c){if(null==a||void 0==a||""==a)return!0;var d=a.replace(/[^x00-xFF]/g,"**").length;return d>c?!1:!0}),jQuery.validator.addMethod("isDigitAndStr",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^[A-Za-z0-9]+$/;return c.exec(a.replace(/[ ]/g,""))?!0:!1}),jQuery.validator.addMethod("isDigitStrAndUnderline",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^[A-Za-z0-9_]+$/;return c.exec(a.replace(/[ ]/g,""))?!0:!1}),jQuery.validator.addMethod("isCodeValidate",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^[A-Za-z0-9//-]+$/;return c.exec(a.replace(/[ ]/g,""))?!0:!1}),jQuery.validator.addMethod("exculdeParticalChar",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^(?:[A-Za-z0-9\u4E00-\u9FA5]*[\(|\（]*[\)|\）]*-*)+$/;return c.exec(a.replace(/[ ]/g,""))?!0:!1}),jQuery.validator.addMethod("exculdePartical",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^(?:[A-Za-z0-9\u4E00-\u9FA5]*[\(|\（\:\]*[\：)|\）]*-*)+$/;return c.exec(a.replace(/[ ]/g,""))?!0:!1}),jQuery.validator.addMethod("telephone",function(a,b){
if(null==a||void 0==a||""==a)return!0;var c=/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/;return c.exec(a.replace(/[ ]/g,""))?!0:!1}),jQuery.validator.addMethod("mobile",function(a,b){var c=a.length,d=/^((1[0-9]{2})+\d{8})$/;return this.optional(b)||11==c&&d.test(a)}),jQuery.validator.addMethod("stature",function(a,b){var c=/^[0-9]*[1-9][0-9]*$/;return this.optional(b)||300>=a&&c.test(a)}),jQuery.validator.addMethod("positiveInteger",function(a,b){var c=/^[0-9]*[1-9][0-9]*$/;return this.optional(b)||c.test(a)}),jQuery.validator.addMethod("nonPositiveInteger",function(a,b){var c=/^((-\d+)|(0+))$/;return this.optional(b)||c.test(a)}),jQuery.validator.addMethod("posNumWiPot",function(a,b){var c=/^[0-9]+(.[0-9]{0,2})?$/;return this.optional(b)||c.test(a)}),jQuery.validator.addMethod("nonNegativeInteger",function(a,b){var c=/^\d+$/;return this.optional(b)||c.test(a)}),jQuery.validator.addMethod("email",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return c.exec(a)?!0:!1}),jQuery.validator.addMethod("IllegalStr",function(a,b){var c=/^(?:[\u4e00-\u9fa5]*\w*\s*)+$/;return c.exec(a)?!0:!1}),jQuery.validator.addMethod("idCard",function(a,b){return checkIdcard(a,b)}),jQuery.validator.addMethod("birthDay",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=new Date,d=c.getYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" ";return new Date(Date.parse(d.replace("-","/")))>new Date(Date.parse(a.replace("-","/")))}),jQuery.validator.addMethod("isExcel",function(a,b){var c=a.substring(a.lastIndexOf(".")+1).toLowerCase();return"xls"!=c?!1:!0}),jQuery.validator.addMethod("notEqualTo",function(a,b,c){var d=$(c).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(b).valid()});return a!=d.val()}),jQuery.validator.addMethod("isUrl",function(a,b){var c=/[a-zA-z]+:\/\/[^\s]+/;return c.exec(a)?!0:!1}),jQuery.validator.addMethod("isDate",function(a,b){var c=/^\d{4}(\-|\/|.)\d{1,2}\1\d{1,2}$/;return c.exec(a)?!0:!1}),jQuery.validator.addMethod("isChinese",function(a,b){var c=/^[\u4e00-\u9fa5]+$/;return c.exec(a)?!0:!1}),jQuery.validator.addMethod("notChinese",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/^[A-Za-z]+$/;return c.exec(a)?!0:!1}),jQuery.validator.addMethod("notChineseOnly",function(a,b){if(null==a||void 0==a||""==a)return!0;var c=/[^\u4e00-\u9fa5]+$/;return c.exec(a)?!0:!1}),jQuery.validator.addMethod("dynamicRequired",function(a,b,c){return""==$(c).val()||null!=a&&void 0!=a&&""!=a?!0:!1}),function(a){a.fn.formValidate=function(b){var c=(a(this),{focusInvalid:!1,showErrors:function(b,c){for(var d=0;d<this.successList.length;d++){var e=this.successList[d];a(e).removeClass("errorInput").poshytip("disable").attr("createMsg","false").closest(".errorInput").poshytip("disable").removeClass("errorInput").next().poshytip("disable").removeClass("errorInput")}for(var d=0;d<this.errorList.length;d++){var e=this.errorList[d].element,f=this.errorList[d].message,g=a(e),h={alignX:"center",alignY:"bottom",showOn:"focus",content:f};("SELECT"===g[0].tagName||g.hasClass("x-form-text"))&&(h.alignX="right",h.alignY="center"),g.is(":file")&&(h.alignX="center",h.alignY="top",h.showOn="hover"),("none"==g.css("display")||"hidden"==g.attr("type")||"radio"==g.attr("type")||"checkbox"==g.attr("type"))&&(g=g.parent()),a.browser.msie&&(a.browser.version<="7.0"||document.documentMode<=7)&&"SELECT"===g[0].tagName&&(g=g.parent()),g.addClass("errorInput"),void 0==g.attr("createMsg")||"false"==g.attr("createMsg")?(g.dialogtip(h),a(".tip-error").bgiframe(),g.attr("createMsg","true")):g.poshytip("update",f).poshytip("show")}},rules:{},messages:{},ignore:""});return a.extend(c,b),a(this).validate(c)}}(jQuery),function(a){a.browser.msie&&a.browser.version<="7.0"&&(a.fn.jqGrid.setFrozenColumns=function(){return!1}),a.fn.setPostData=function(b){a(this).jqGrid("setGridParam",{postData:null}),a(this).jqGrid("setGridParam",{postData:b})},a.fn.getPostData=function(){return jQuery(this).jqGrid("getGridParam","postData")},a.fn.jqGridFunction=function(b){var c=a(this),d={rowNum:20,datatype:"json",rowList:[10,15,20,30,50,80,100],gridview:!0,viewrecords:!0,jsonReader:{repeatitems:!1,id:"0"},autowidth:!0,scrollrows:!0,sortname:"id",sortorder:"desc",pager:"#"+a(this).attr("id")+"Pager",showColModelButton:!0,shrinkToFit:!1,rightClick:!1,rightClickOption:{},loadComplete:function(){a.loadingComp("close"),a("#"+a(this).attr("id")+"Pager .ui-pg-input").attr("size","3")},onRightClickRow:function(a,b,d,e){c.jqGrid("setSelection",a,!0),c.data("selectid",a)}};extendDefaultOption(d,b,getColModelFromCookie(c));for(var e=0;e<d.colModel.length;e++)void 0==d.colModel[e].sortable&&(d.colModel[e].sortable=!1);if(b.loadComplete&&(d.loadComplete=function(){b.loadComplete(),a.loadingComp("close"),a("#"+a(this).attr("id")+"Pager .ui-pg-input").attr("size","5")}),c.jqGrid(d),d.rightClick&&(c.data("selectid",null),c.gridRowRightClick(d.rightClickOption)),window._currentGrid=c,d.pager&&(c.navGrid("#"+a(this).attr("id")+"Pager",{edit:!1,add:!1,del:!1,search:!1,refresh:!1}),d.showColModelButton)){var f=!1;c.navButtonAdd("#"+a(this).attr("id")+"Pager",{caption:"自定义显示",buttonimg:"",onClickButton:function(){c.setColumns({width:200,drag:!1,resizable:!1,beforeShowForm:function(a){var b=c.attr("id");proccessStyleWhenSetColumShow(b),f||bindClickToOkButton(a,b),bindClickToCancelButton(a),f=!0,proccessLabelShow(a),hideFrozencolModel(d.colModel)}}),a(this).jqGrid("setColumns")},position:"last"})}},a.fn.jqSubGrid=function(b){function c(){var b=a.cookie("cssSkin");switch(null==b&&(b="default"),b){case"default":return"#A6C9E2";case"blue":return"#A5B4D3";case"green":return"#C6E371"}}var d=a(this),e={subGridUrl:"",subGridPostData:!1,rowNum:20,datatype:"json",rowList:[10,15,20,30,50,80,100],viewrecords:!0,multiselect:!1,subGrid:!0,jsonReader:{repeatitems:!1,id:"0"},height:"auto",width:"auto",autowidth:!0,sortname:"id",sortorder:"desc",pager:"#"+a(this).attr("id")+"Pager",showColModelButton:!1,subGridRowExpanded:function(b,c){var f=a("#"+b).parent().attr("colspan");a(".subgrid-cell").remove(),a("#"+b).parent().attr("colspan",f+1);var g=a.extend({id:c},e.subGridPostData(d.getRowData(c)));d.find(".sgexpanded").click(),a("#"+b).load(e.subGridUrl,g,function(){var b=0;d.find("tr").each(function(d,e){return a(e).attr("id")==c?!1:void(b+=a(e).outerHeight())}),d.parent().parent().scrollTop(b);var e=a("#"+c,d);e.find("td").addClass("ui-widget-border").css({"border-top-width":"2px","border-top-color":"#69f"}),e.find("td:first").css({"border-left-width":"2px","border-left-color":"#69f"}),e.find("td:last").css({"border-right-width":"2px","border-right-color":"#69f"}),a("tr.ui-subgrid td:first").css({border:"2px solid #69f","border-right-width":"0px","border-top-width":"0px"}),a("tr.ui-subgrid td:last").css({"border-left-width":"0px","border-top-width":"0px","border-right-color":"#69f","border-right-width":"2px","border-bottom-color":"#69ff","border-bottom-width":"2px"}),a(".ui-subgrid td:first .jqsubgrid").width(a(".ui-subgrid").width()-15),a(".con_up:first").remove()})},subGridRowColapsed:function(b,e){var f=a("#"+e,d);f.find("td").removeClass("ui-widget-border").css({"border-top-width":"0px"}),f.find("td:first").css({"border-left-width":"0px"}),f.find("td:last").css({"border-right-width":"1px","border-left-width":"0px","border-right-color":c()})},ondblClickRow:function(a){d.toggleSubGridRow(a)},caption:!1,gridComplete:function(){},loadComplete:function(){a.loadingComp("close")}};e.height=a(".ui-layout-center").height()-a("#nav:visible").outerHeight()-a("#thisCrumbs:visible").outerHeight()-a(".content-top").height()-a("#content-top").height()-a(".groupNav").height()-a("#commonPopulation:visible").height()-a("#tabList .ui-tabs-nav").outerHeight()-a("#contractCommonPopulation").outerHeight(!0)-a("#statistics").outerHeight(!0)-65,0==e.pager&&(e.rowNum=-1),a.extend(e,b),b.loadComplete&&(e.loadComplete=function(){b.loadComplete(),a.loadingComp("close")}),extendOnSelectRow(e,b),a(this).jqGrid(e),e.pager&&a(this).navGrid("#"+a(this).attr("id")+"Pager",{edit:!1,add:!1,del:!1,search:!1,refresh:!1}),window._currentGrid=d},a.fn.jqTreeGrid=function(b){var c=a(this),d={url:"",treeGrid:!0,treeGridModel:"adjacency",hidegrid:!1,datatype:"json",mtype:"POST",height:"auto",width:"auto",editable:!1,autowidth:!0,rowNum:-1,jsonReader:{repeatitems:!1,id:"0"},expandIndex:0,loadComplete:function(){for(var b=c.find(".tree-wrap-ltr"),d=0;d<b.length;d++)a(b[d]).prependTo(a(b[d]).parent().parent().children("td")[this.expandIndex]);a.loadingComp("close")}};d.height=a(".ui-layout-center").height()-a("#nav:visible").outerHeight()-a("#thisCrumbs:visible").outerHeight()-a(".content-top").height()-a("#content-top").height()-a(".groupNav").height()-a("#commonPopulation:visible").height()-a("#tabList .ui-tabs-nav").outerHeight()-a("#contractCommonPopulation").outerHeight(!0)-a("#statistics").outerHeight(!0)-65,extendDefaultOption(d,b,getColModelFromCookie(c)),b.loadComplete&&(d.loadComplete=function(){b.loadComplete();for(var e=c.find(".tree-wrap-ltr"),f=0;f<e.length;f++)a(e[f]).prependTo(a(e[f]).parent().parent().children("td")[d.expandIndex]);a.loadingComp("close")}),c.jqGrid(d),window._currentGrid=c},a.fn.reloadSubGridByRowId=function(b){var c=a("tr[id='"+b+"']",a(this)).next(".ui-subgrid").find("#"+a(this).attr("id")+"_"+b);c.height(a("tr[id='"+b+"']",a(this)).next(".ui-subgrid").height()),c.html("<img src="+RESOURCE_PATH+'"/resource/images/loading.gif" alt="加载中..." />');var d=a(this).getGridParam("subGridPostData");a.extend(d,{id:b}),c.load(a(this).getGridParam("subGridUrl"),d,function(){c.css("height","auto")})},a.fn.deleteSubGridByRowId=function(b){a("#"+b,a(this)).next(".ui-subgrid").remove()},a.fn.delRowDatas=function(b){for(var c=b.length,d=0;c>d;d++)a("#"+b[d],a(this)).remove()},a.fn.getSelectedRowId=function(){var b=a(this).getSelectedRowDom();return b?b.attr("id"):null},a.fn.getSelectedRowDom=function(){return a(this).jqGrid("getGridParam","selrow")?a("tr[role='row'][id='"+a(this).jqGrid("getGridParam","selrow")+"']",a(this)):null},a.fn.getSelectedRowIds=function(){return a(this).getGridParam("selarrrow")},a.fn.toNext=function(b,c,d){var e=a(this),f=e.jqGrid("getGridParam","selrow"),g=a("#"+f,e);if(b)a.ajax({type:"post",url:b,data:c,success:function(b){var c=e.jqGrid("getGridParam","selrow"),f=e.getRowData(c),g=a("#"+c,e).next().attr("id"),h=e.getRowData(g);f.count>0?e.reloadDataGrid(null,null):moveNode(f,h,"down"),d&&d.call(null,b)}});else{var h=g.next();h.attr("id")&&h.after(g)}},a.fn.toPrevious=function(b,c,d){var e=a(this),f=e.jqGrid("getGridParam","selrow"),g=a("#"+f,e);if(b)a.ajax({type:"post",url:b,data:c,success:function(b){var c=e.jqGrid("getGridParam","selrow"),f=e.getRowData(c),g=a("#"+c,e).prev().attr("id"),h=e.getRowData(g);f.count>0?e.reloadDataGrid(null,null):moveNode(f,h,"up"),d&&d.call(null,b)}});else{var h=g.prev();h.attr("id")&&g.after(h)}},a.fn.toTreeGridNext=function(b,c){var d=a("#dailyDirectoryTree"),e=d.jqGrid("getGridParam","selrow"),f=d.getRowData(e);b&&a.ajax({type:"post",url:b,data:c,success:function(b){if(3==f.level){var c=d.getRowData(a("tr[id="+e+"]").next().attr("id"));a("#"+c.id).after(a("#"+f.id))}else if(2==f.level){for(var g=d.getRowData(a("tr[id="+e+"]").next().attr("id")),h=d.getRowData(a("tr[id="+e+"]").next().attr("id"));;){if("2"==g.level)break;g=d.getRowData(a("#"+g.id).next().attr("id"))}var i=(d.getRowData(a("#"+g.id).next().attr("id")),d.getRowData(a("#"+g.id).next().attr("id")));if(a("#"+g.id).after(a("#"+f.id)),h.length>0||"3"==h.level){var j=d.jqGrid("getNodeParent",h),k=d.jqGrid("getNodeChildren",j);a(k).each(function(b){var c=a(this).attr("id");a("#"+f.id).after(a("#"+c))})}if(i.length>0||"3"==i.level){var j=d.jqGrid("getNodeParent",i),l=d.jqGrid("getNodeChildren",j);a(l).each(function(b){var c=a(this).attr("id");a("#"+g.id).after(a("#"+c))})}}}})},a.fn.toFirst=function(b,c,d){var e=a(this),f=e.jqGrid("getGridParam","selrow"),g=a("#"+f,e);b?a.ajax({type:"post",url:b,data:c,success:function(b){a(".jqgfirstrow",e).after(g),d&&d.call(null,b)}}):a(".jqgfirstrow",e).after(g)},a.fn.toTreeFirst=function(b,c,d){var e=a(this),f=e.jqGrid("getGridParam","selrow");a("#"+f,e);b&&a.ajax({type:"post",url:b,data:c,success:function(b){var c=a("#dailyDirectoryTree"),d=c.jqGrid("getGridParam","selrow"),e=c.getRowData(d),f=c.jqGrid("getNodeParent",e),g=c.getRowData(a("tr[id="+d+"]").next().attr("id"));if(g.length>0||"3"==g.level){var h=c.jqGrid("getNodeParent",g),i=c.jqGrid("getNodeChildren",h);a(i).each(function(b){var c=a(this).attr("id");a("#"+f.id).after(a("#"+c))})}a("#"+f.id).after(a("#"+e.id))}})},a.fn.expandAppointRow=function(b){var c=a(this);if(!(null==b||b.length<=0))for(var d=new Array,d=b.split("/"),e=0;e<=d.length-1;e++)a(a("tr[id="+d[e]+"]"),a(c)).find(".tree-minus")&&0==a(a("tr[id="+d[e]+"]"),a(c)).find(".tree-minus").size()&&a(a("tr[id="+d[e]+"]"),a(c)).find(".treeclick").click()},a.fn.toTreeEnd=function(b,c,d){b&&a.ajax({type:"post",url:b,data:c,success:function(b){var c=a("#dailyDirectoryTree"),d=c.jqGrid("getGridParam","selrow"),e=c.getRowData(d),f=c.jqGrid("getNodeParent",e),g=c.jqGrid("getNodeChildren",f),h=c.getRowData(a("tr[id="+d+"]").next().attr("id"));if("2"==e.level){if(h.length>0||"3"==h.level){var i=c.jqGrid("getNodeParent",h),j=c.jqGrid("getNodeChildren",i);a(j).each(function(b){var c=a(this).attr("id");a("#"+g[g.length-1].id).after(a("#"+c))})}a("#"+g[g.length-1].id).after(a("#"+e.id))}else a("#"+g[g.length-1].id).after(a("#"+e.id))}})},a.fn.toEnd=function(b,c,d){var e=a(this),f=e.jqGrid("getGridParam","selrow"),g=a("#"+f,e);b?a.ajax({type:"post",url:b,data:c,success:function(a){e.append(g),d&&d.call(null,a)}}):a(this).append(g)},a.fn.getGridRowData=function(){return a(this).getRowData(a(this).getGridParam("selrow"))},a.fn.reloadDataGrid=function(b,c){return null==b&&null==c?void a(this).trigger("reloadGrid"):(a(this).setGridParam({url:b,postData:c}),void a(this).trigger("reloadGrid"))}}(jQuery),function(a){a.widget("ui.combobox",{options:{afterChange:!1,isHavePlease:!1},_create:function(){var b=this,c=this.element.hide(),d=c.children(":selected"),e=d.val()?d.text().split(",")[0]:"",f=a("<input class='form-txt' >");f.insertAfter(c).val(e).autocomplete({delay:0,minLength:0,source:function(d,e){var f=d.term.toLowerCase();e(c.children("option").map(function(c){if(b.options.isHavePlease&&0==c&&""==f)return{label:"全部",value:"全部",option:this};var d=a(this).text(),e=d.split(",");return!this.value||0!=e[0].indexOf(f)&&0!=e[1].indexOf(f)&&0!=e[2].indexOf(f)?void 0:{label:e[0],value:e[0],option:this}}))},open:function(b,c){a(".ui-autocomplete").find("iframe").remove(),a(".ui-autocomplete").css({"overflow-y":"auto"})},close:function(b,c){a(".ui-autocomplete").css({"overflow-y":"hidden"})},select:function(c,d){a(d.item.option).attr("selected",!0),b.options.afterChange&&b.options.afterChange.call(null,a(d.item.option).val()),b._trigger("selected",c,{item:d.item.option})},change:function(b,d){if(""==f.val())return c.val(""),!1;if(null==d.item){var e=(a(this).val(),!1);if(c.children("option").each(function(b){if(0!=b){var c=a(this).text(),d=c.split(",");a(this).attr("selected")&&(f.val(d[0]),e=!0)}}),!e)return a(this).val(""),c.val(""),!1}}});var g=a('<button type="button" class="ui-autocompleteButton ui-button ui-widget ui-state-default ui-button-icon-only ui-button-icon" tabindex="-1" title="显示全部" role="button" aria-disabled="false" style="width:22px;top:5px;_top:6px;position:absolute;left:'+(f.width()-14)+'px;"><span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s" style="width:12px"></span><span class="ui-button-text">&nbsp;</span></button>');f.parent().css("position","relative"),g.insertAfter(f),g.click(function(){return f.autocomplete("widget").is(":visible")?void f.autocomplete("close"):(f.autocomplete("search",""),void f.focus())}),f.val("全部")}})}(jQuery),function(a){a.fn.extend({richText:function(b){var c={tools:"Blocktag,Fontface,FontSize,Bold,Italic,Underline,Strikethrough,FontColor,BackColor,SelectAll,Removeformat,|,Align,List,Outdent,Indent,|,Img,Fullscreen",skin:"vista",forcePtag:!1};a.extend(c,b),a(this).xheditor(c).focus()}}),a.fn.extend({richImg:function(b){var c={tools:"Blocktag,Fontface,FontSize,Bold,Italic,Underline,Strikethrough,FontColor,BackColor,SelectAll,Removeformat,|,Align,List,Outdent,Indent,|,Img,Fullscreen",skin:"vista",upMultiple:!0,upImgUrl:"/imageUpload/ajaxUploadImg.action",upImgExt:"jpg,jpeg,gif,bmp,png",html5Upload:!1,cleanPaste:0,forcePtag:!1};a.extend(c,b),a(this).xheditor(c).focus()}}),a.fn.extend({noBarRichText:function(b){var c={tools:"",skin:"vista",forcePtag:!1};a.extend(c,b),a(this).xheditor(c).focus(),a(".xhe_vista table tbody tr:first").remove()}})}(jQuery),function(a){a.fn.personnelComplete=function(b){var c=a(this),d={postDataFunction:function(){},loadingImg:RESOURCE_PATH+"/resource/external/selectInPlace/ajax-loader.gif",loadingText:"正在加载...",multiple:!0,url:"",dynamic:!0,param:"tag",height:"auto",width:"auto",htmlMethod:function(a){var b="";b=void 0!=a.image&&null!=a.image&&""!=a.image?'<img src="'+a.image+'"/>':'<img src="'+RESOURCE_PATH+'/resource/external/selectInPlace/defaultHeader.jpg"/>';var c=a.desc;return(null==c||void 0==c)&&(c=""),'<li style="width:'+this.width+'px">'+b+'<div class="title">'+a.label+"</div><div>&nbsp;"+c+"</div></li>"},fullMessage:"不能选择更多...",valueMethod:function(a){return a.value},max:20,select:function(a){},itemClose:function(a){},labelMethod:function(b){d.select(a(b).data("data"));var c='<LI class="bit-box">'+b.children(".title").text()+'<A class="closebutton" href="#"></A>';return c}};a.extend(d,b),a(this).selectInPlace(d),"auto"!=d.height&&a("#holder_"+c.attr("id")).css({height:d.height+"px",overflow:"hidden","overflow-y":"auto"})},a.fn.setPersonnelCompleteVal=function(b){var c=a('<li class="bit-box">'+b.label+'<a class="closebutton" href="#"></a></li>').data("data",b.value),d=a(this).val();""!=d?a(this).val(b.value+","+d):a(this).val(b.value),a(this).next().prepend(c)},a.fn.resetPersonnelCompleteVal=function(b){var c=a('<li class="bit-box">'+b.label+'<a class="closebutton" href="#"></a></li>').data("data",b.value);a(this).val();a(this).val(b.value),a(this).next().children(".bit-box").remove(),a(this).next().prepend(c)},a.fn.clearPersonnelComplete=function(){a(this).val();a(this).val(""),a(this).next().children(".bit-box").remove()},a.fn.removePersonnelCompeleteVal=function(b){this.next().children(":contains('"+b.orgName+"')").remove();var c=String(a(this).val()),d=c.substring(c.indexOf(b.id));if(-1!=c.indexOf(",")&&-1!=d.indexOf(",")){var e=d.substring(c.indexOf(",")+1);c=c.substring(0,c.indexOf(b.id)).concat(e),a(this).val(c)}else-1!=c.indexOf(",")&&-1==d.indexOf(",")?a(this).val(c.substring(0,c.indexOf(b.id)-1)):a(this).val("")},a.fn.removePersonnelCompeleteValue=function(b){for(var c=a(this),d=new Array,e=c.val(),f="",g=b,d=e.split(","),h=-1,i=0;i<d.length;i++)g!=d[i]?f=f+d[i]+",":h=i;c.val(f.substring(0,f.length-1)),c.next().children(".bit-box:eq("+h+")").remove()}}(jQuery),$.fn.extend({typeSelect:function(a){function b(){var a=g.height(),b=f.parent().width(),c=f.parent().height();switch(h.position){case"top-left":g.css({top:-(a+10)+"px",left:-(h.width-b+10)+"px"});break;case"top-right":g.css({top:-(a+10)+"px",right:-(h.width-b+10)+"px"});break;case"bottom-left":g.css({top:c-5+"px",right:"0px"});break;case"bottom-right":g.css({top:c-5+"px",left:"0px"})}}function c(){g.find("li.top").addClass("ui-widget-border ui-widget-color ui-widget-header"),g.addClass("ui-widget-border-on"),g.find(".close").addClass("ui-icon ui-icon-closethick")}function d(){g.width(h.width),g.find("li label").width(h.width/h.columns-20),g.find("li").width(h.width/h.columns-10).find("label").width(h.width/h.columns-20),g.find("li.top").width(h.width),g.find("li.top p").width(h.width-50),g.height(g.height())}function e(){f.nextAll("ul:first").find(".close").click(h.close),f.parent().hover(function(){clearTimeout(j),i=setTimeout(h.hoverEvent,h.hoverDuring)},function(){clearTimeout(i),j=setTimeout(function(){h.outEvent(this)},h.outDuring)}),f.nextAll("ul:first").click(function(a){a.stopPropagation()}),f.click(function(){clearTimeout(j),clearTimeout(i),i=setTimeout(h.hoverEvent,h.hoverDuring)}),f.nextAll("ul:first").find("input").click(function(){(1==$(this).attr("checked")||"checked"==$(this).attr("checked"))&&f.attr("checked",!0),g.find("input:checked").size()>0?f.attr("checked",!0):f.removeAttr("checked")})}var f=$(this),g=f.nextAll("ul:first"),h={width:500,columns:2,hoverDuring:200,outDuring:300,hoverEvent:function(){$(".zc-sf").hide(),g.show().bgiframe(),$(document).one("click",function(){$(".zc-sf").hide(),h.close()}),$(".multipeSelect").removeAttr("style"),g.closest(".multipeSelect").css({zIndex:999999}),g.find(".close").one("click",function(){$(".zc-sf").hide(),h.close()})},outEvent:function(a){$(a).find(".zc-sf").hide()},position:"bottom-right",close:function(a,b){}};$.extend(h,a);var i,j;d(),c(),b(),e()},getTypeSelectValues:function(){var a=$(this).attr("id"),b=$(this).nextAll("ul:first");$(".close").parent().parent().hide();var c=b.find(":checkbox"),d="",e="";return $(c).each(function(){$(this).attr("checked")&&(d=d+$(this).attr("value")+",",e=e+$(this).parent().text()+",")}),b.find("input:checked").size()>0&&$("#"+a).attr("checked",!0),d},setTypeSelectValues:function(a){var b=a.split(",");for(i=0;i<b.length;i++)$(this).nextAll("ul:first").find("input[value='"+b[i]+"']").attr("checked",!0);$(this).attr("checked",!0)},getTypeSelectLabels:function(){var a=$(this).attr("id"),b=$(this).nextAll("ul:first");$(".close").parent().parent().hide();var c=b.find(":checkbox"),d="",e="";return $(c).each(function(){$(this).attr("checked")&&(d=d+$(this).attr("value")+",",e=e+$(this).parent().text()+"；")}),b.find("input:checked").size()>0&&$("#"+a).attr("checked",!0),e},resetTypeSelectLabels:function(){}}),function(a){a.announcement=function(b){var c={updateUrl:"#",content:"",width:a("body").width()-16,height:30,top:"0px",left:"0px",bottom:"0px",right:"0px",dataId:!1};a.extend(c,b);var d="announcement",e=a.cookie(d);return null==e&&a.cookie(d,"",{path:"/",expires:10}),e==c.dataId?!1:(a("#announcementCtt").remove(),a("body").prepend('<div id="announcementCtt"></div>'),a("#announcementCtt").prepend(c.content),void a("#announcementCtt").dialog({title:"公告",width:300,height:200,position:"right bottom",stack:!0,resizable:!1,close:function(){a.cookie(d,c.dataId,{path:"/",expires:10})}}).closest(".ui-dialog").prependTo("body"))}}(jQuery),jQuery.fn.extend({initTree:function(a){return proccessTreeOption(a,$(this))},initAdministrativeTree:function(a){return a=$.extend({},a),a.isFuncDep||(a.orgType="0"),proccessTreeOption(a,$(this))},initFunctionalTree:function(a){return a=$.extend({},a),a.orgType="1",proccessTreeOption(a,$(this))},initSelfFunctionalTree:function(a){return a=$.extend({},a),a.orgType="11",proccessTreeOption(a,$(this))},initPartyTree:function(a){return a=$.extend({},a),a.orgType="2",proccessTreeOption(a,$(this))},initAllOrgTree:function(a){return proccessTreeOption(a,$(this))}}),jQuery.extend({toNextNode:function(a,b){var c=a.getNodeById(b),d=c.parentNode;if(!c.isLast()){if(c.nextSibling.isLast()){var e=c.nextSibling;return void d.insertBefore(e,c)}var f=c.nextSibling.nextSibling;d.insertBefore(c,f)}},toPreviousNode:function(a,b){var c=a.getNodeById(b);if(!c.isFirst()){var d=c.parentNode,e=c.previousSibling;d.insertBefore(c,e)}},toFirstNode:function(a,b){var c=a.getNodeById(b);if(!c.isFirst()){var d=c.parentNode,e=d.firstChild;d.insertBefore(c,e)}},toEndNode:function(a,b){var c=a.getNodeById(b);if(!c.isLast()){var d=c.parentNode;d.appendChild(c)}},searchChild:function(a,b,c){0==b.indexOf("/")&&(b=b.substring(1)),b="/"+a.id+"-root/"+b,a.selectPath(b,null,function(b,d){a.getSelectionModel().select(d),a.fireEvent("click",d),c()})},rename:function(a,b,c){a.getNodeById(b).setText(c)},setOrgNodeType:function(a,b,c){a.getNodeById(b).attributes.internalId=c},addNodeToFirst:function(a,b,c){var d=new Ext.tree.TreeNode(b),e=a.getNodeById(c);e.isLeaf()&&(e.leaf=!1);var f=e.firstChild;e.insertBefore(d,f)},addNodeToLast:function(a,b,c){var d=new Ext.tree.TreeNode(b),e=a.getNodeById(c);e.isLeaf()&&(e.leaf=!1),e.appendChild(d)},addNodeToLastByParentNode:function(a,b,c){var d=new Ext.tree.TreeNode(b);c.isLeaf()&&(c.leaf=!1),c.appendChild(d)},addClick:function(a,b){a.on("click",b)},addDbClick:function(a,b){a.on("dblclick",b)},getSelectedNode:function(a){return a.getSelectionModel().getSelectedNode()},getSelectedNodeId:function(a){var b=a.getSelectionModel().getSelectedNode();return null!=b&&void 0!=b?b.attributes.id:void 0},selectRootNode:function(a){a.getSelectionModel().select(a.getRootNode().firstChild),a.fireEvent("click",a.getRootNode().firstChild)},removeNode:function(a,b){var c=a.getNodeById(b);c.isLast()?(a.getSelectionModel().select(c.parentNode),a.fireEvent("click",c.previousSibling)):(a.getSelectionModel().select(c.nextSibling),a.fireEvent("click",c.nextSibling)),c.parentNode.removeChild(c)},disableNode:function(a,b){a.getNodeById(b).disable()},setTreeValue:function(a,b){null!=a&&a>0&&$.ajax({url:PATH+"/sysadmin/orgManage/ajaxSearchParentNodeIds.action?organization.id="+a,success:function(a){$.searchChild(b,a)}})}});